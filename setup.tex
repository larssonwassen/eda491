\section{System Configuration and Requirements}
\label{sec:setup}

At the begining of the lab a initial firewall configuration was in place to make the host work as intended when not used for this particular \lab. The configuration can be seen in Listing~\ref{lst:fw-init}. The rules that are present are mainly for the file sharing protocol NFS which is used by all client hosts on chalmers network. Without these rules the hosts would not be able to communicate with the NFS server and thereby not be able to access files that are crucial for the system to run properly. The other rules present, more specifically line number 2 and 3 in the INPUT chain and line number 1 and 2 in the FORWARD chain is there to drop invalid TCP packets. This is done to protect from for example so called xmas and TCP NULL scans and from other undefined behaviour when receiving invalid TCP packets.


One of the first things to decide upon is which fundamental rule to apply regarding security in firewalls. The choice is either to drop all traffic that is not permitted by the rules or to accept all traffic that is not denied by the rules. Our choice was to drop the traffic that was not specifically permitted due to it makes the system more secure. The latter choice opens up for security risks if the system is not properly configured in a heigher manner than the first choice does. If the choice was to drop all the unspecified traffic the risk is heigher that the firewall drops valid data than to accept malicious data, but if the firewall accept all traffic that is not blocked by rules it is more likely that it actually accepts malicious data.

One thing to note is that the defualt policy for all the chains is ACCEPT which means that if a packet dont match any firewall rule they will be accepted and all packets that we want to DROP we will have to make specific rules for. Generally from a security point of view we would say that this is a bad way to setup a firewall, on the other hand, from a functionality point of view it could be seen as good. As you will have to have rules for all packets that should be droped, which probably is many more than should be accepted, a system under heavy load will work slower with a default policy of ACCEPT than with DROP.  



The firewall had three chains that could be monitored. The input chain consisted of the incomming traffic from the network interface, the output chain held the outgoining traffic from the host computer and the chain forward is used to route... If its source and destination are both other machines—it's being routed through the server—then it hits the FORWARD chain.

\lstinputlisting[caption=Initial firewall configuration,label=lst:fw-init]{firewall-init.txt}

